{"version":3,"file":"app/javascripts/build/classes.js","sources":["app/javascripts/build/classes.js","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/4"],"names":[],"mappings":"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","sourcesContent":["\n/////////////////////\n/// Appliction Delegate\n/////////////////////\n\nclass Application {\n\n  constructor() {\n    this.setStructure();\n    this.startSoundCloud();\n    this.watchKeyboardShortcuts();\n  }\n\n  setStructure() {\n    this.Views = {};\n    this.Collections = {};\n    this.Models = {};\n  }\n\n  startSoundCloud() {\n    this.SoundCloud = new SoundCloud();\n    this.SoundCloud.connect({\n      success: _.bind(function(userId) {\n        this.getInitialCollection();\n      }, this)\n    });\n  }\n\n  getInitialCollection() {\n    this.Collections.FavoritesCollection  = new FavoritesCollection([], {userId: this.SoundCloud.userId});\n\n    this.Collections.FavoritesCollection.fetch({\n\n      success: _.bind(function() {\n        this.startBackbone();\n        // Need elements to be created for volume to start\n        this.startAudio();\n      }, this)\n\n    });\n  }\n\n  startBackbone() {\n    this.Router = new Router();\n    Backbone.history.start();\n  }\n\n  startAudio() {\n    this.AudioController = new AudioController();\n  }\n\n  watchKeyboardShortcuts() {\n    new KeyboardShortcuts();\n  }\n\n}\n\n/////////////////////\n/// Start the app\n/////////////////////\n\n$(() => {\n  window.App = new Application();\n});;class AudioController {\n\n  constructor() {\n    this.setupElements();\n    this.setupVolume();\n  }\n\n  /////////////////////\n  /// Setup\n  /////////////////////\n\n  setupElements() {\n    // Not using React for this\n    this.audioElement = document.getElementById('current-track');\n    this.audioElement.addEventListener('timeupdate', _.throttle(function() {\n      App.SoundCloud.getWaveform().redraw();\n    }, 350), false);\n    this.audioElement.addEventListener('ended', _.bind(function() {\n      this.playNextTrack();\n    }, this), false);\n    this.audioContext = new webkitAudioContext();\n    this.audioSource  = this.audioContext.createMediaElementSource(this.audioElement);\n    this.audioSource.connect(this.audioContext.destination);\n  }\n\n  setupVolume() {\n    var volume = readCookie('volume') || 1;\n    document.cookie = `volume=${volume}`\n\n    this.volumeSlider = new Dragdealer('volume-slider', {\n      x: volume,\n      requestAnimationFrame: true,\n      steps: 100,\n      snap: true,\n      animationCallback: _.bind(function(x, y) {\n        this.currentTrack && this.setVolume(x);\n      }, this)\n    });\n  }\n\n  /////////////////////\n  /// Streaming\n  /////////////////////\n\n  setVolume(number) {\n    number = number || readCookie('volume');\n\n    // number = parseFloat(number);\n    number = Math.round(number * 100);\n    if (number < 5) { number = 0; }\n    this.currentTrack.volume = number / 100;\n    document.cookie = `volume=${number / 100}`\n  }\n\n  playTrack(track) {\n    var url = `${track.stream_url}?client_id=${App.SoundCloud.clientId}`;\n    \n    // Handle the current song\n    this.currentTrack && this.pauseCurrentTrack() && this.clearCurrentTrack();\n\n    // Template the now playing view\n    App.Views.NowPlayingView.render(track);\n\n    // Change the source of the audio element and play the new track\n    this.audioElement.src = url;\n    this.currentTrackId = track.id;\n    this.currentTrackIndex = this.getCurrentTrackIndex(this.currentTrackId);\n    this.currentTrack = this.audioSource.mediaElement;\n    this.setVolume();\n    this.currentTrack.play();\n    App.SoundCloud.getWaveform().dataFromSoundCloudTrack(track);\n  }\n\n  getCurrentTrackIndex(currentTrackId) {\n    // App.Collections.currentTrackCollection\n    var model = App.Collections.FavoritesCollection.find( function(model) {\n      return model.get('id') === currentTrackId;\n    });\n\n    var index = App.Collections.FavoritesCollection.indexOf(model);\n\n    return index;\n  }\n\n  /////////////////////\n  /// State Helpers\n  /////////////////////\n\n  clearCurrentTrack() {\n    this.audioElement.currentTime = 0;\n    this.audioElement.duration = 1;\n  }\n\n  pauseCurrentTrack() {\n    this.currentTrack.pause();\n  }\n\n  playCurrentTrack() {\n    this.currentTrack.play();\n  }\n\n  changeTrack(trackIndex) {\n    this.currentTrackComponent && this.currentTrackComponent.setState({status: 'stopped'});\n    var model = App.Collections.FavoritesCollection.at(trackIndex);\n    // Play the next track if it exists\n    model && this.playTrack(model.attributes);\n\n    App.SoundCloud.fetchComments(model.get('id'));\n\n    React.renderComponent(\n      Controls({nextAction: 'pause'}),\n      document.getElementById('controls-wrap')\n    )\n\n    React.renderComponent(\n      UserBlurb({data: model.attributes}),\n      document.getElementById('user-blurb-wrap')\n    )\n  }\n\n  playNextTrack() {\n    var index = this.currentTrackIndex + 1;\n\n    this.changeTrack(index);\n  }\n\n  playPreviousTrack() {\n    var index = this.currentTrackIndex - 1;\n\n    this.changeTrack(index);\n  }\n\n  toggleCurrentTrackState() {\n    if (this.currentTrack.paused) {\n      this.playCurrentTrack();\n    } else {\n      this.pauseCurrentTrack();\n    }\n  }\n\n};class KeyboardShortcuts {\n\n  constructor() {\n    this.watchKeys();\n  }\n\n  watchKeys() {\n    document.addEventListener('keydown', function(event) {\n      var spaceKey = 32;\n\n      if (event.keyCode === spaceKey) {\n        event.preventDefault();\n        App.AudioController.toggleCurrentTrackState();\n      }\n    }, false)\n  }\n\n};\n/////////////////////\n/// Backbone Router\n/////////////////////\n\nclass Router extends Backbone.Router {\n\n  constructor() {\n    this.routes = {\n      ''    : 'player'\n    }\n    super();\n  }\n\n  player() {\n    new PlayerView();\n  }\n\n};\n/////////////////////\n/// Soundcloud & audio management\n/////////////////////\n\nclass SoundCloud {\n\n  constructor() {\n    this.clientId = Config.clientId;\n    this.initialize();\n  }\n\n  /////////////////////\n  /// App setup\n  /////////////////////\n\n  initialize() {\n    SC.initialize({\n      client_id: this.clientId,\n      redirect_uri: Config.redirectUri\n    });\n  }\n\n  /////////////////////\n  /// Get user data\n  /////////////////////\n\n  connect(options) {\n\n    var self   = this,\n        userId = readCookie('userId'),\n        success = options.success;\n\n    // If the userId is null\n    if (!userId) {\n\n      // Make the user login\n      SC.connect(function() {\n        SC.get('/me', function(me) {\n          self.userId = me.id;\n          self.publicFavoritesCount = me.public_favorites_count;\n\n          document.cookie = `userId=${me.id}`\n          document.cookie = `publicFavoritesCount=${me.public_favorites_count}`\n          document.cookie = `avatarUrl=${me.avatar_url}`\n          document.cookie = `username=${me.username}`\n\n          success(userId);\n        });\n      });\n\n    } else {\n\n      // Save the userId\n      this.userId = userId;\n      success(userId);\n\n    }\n  }\n\n  /////////////////////\n  /// Comments\n  /////////////////////\n\n  fetchComments(trackId) {\n    // Fetch the comments for the track\n    SC.get(`/tracks/${trackId}/comments`, function(comments) {\n      // TODO: Boo jQuery\n      $('#comments-wrap').scrollTop(0)\n      React.renderComponent(\n        Comments({data: comments}),\n        document.getElementById('comments-wrap')\n      )\n    });\n  }\n\n  /////////////////////\n  /// Waveform\n  /////////////////////\n\n  getWaveform() {\n    if (!this.waveform) {\n      var container = document.getElementById('waveform'),\n          width     = container.getBoundingClientRect().width - 300; // Subtract 300 as the sidebar is that wide and this element is positioned with 100% window width but with padding on the left.\n\n      this.createWaveform(container, width);\n      this.createGradient();\n      this.watchWaveformClickEvents();\n    }\n\n    return this.waveform;\n  }\n\n  createWaveform(container, width) {\n    this.waveform = new Waveform({\n      container: container,\n      width: width,\n      innerColor: _.bind(function(percentageOfWaveform, d) {\n        var songPercentage = App.AudioController.audioElement.currentTime / App.AudioController.audioElement.duration;\n\n        if (percentageOfWaveform > songPercentage || isNaN(percentageOfWaveform) === true || isNaN(App.AudioController.audioElement.duration) || typeof(percentageOfWaveform) === 'undefined') {\n          // If this portion of the track hasn't played yet\n          return '#444';\n        } else {\n          // If this portion of the track has already played\n          return this.gradient;\n        }\n      }, this)\n    });\n\n    this.waveformCanvas = document.querySelectorAll('#waveform canvas')[0];\n  }\n\n  // Changing the default of a solid color as the fill layer\n  createGradient() {\n    var waveformContext = this.waveform.context,\n        gradient = waveformContext.createLinearGradient(0, 0, 0, this.waveform.height);\n\n    gradient.addColorStop(0.0, \"#f60\");\n    gradient.addColorStop(1.0, \"#ff1b00\");\n    this.gradient = gradient;\n  }\n\n  // Change the track position upon click\n  watchWaveformClickEvents() {\n    this.waveformCanvas.addEventListener('click', _.bind(function(event) {\n      var mousePos = this.getMousePosition(this.waveformCanvas, event),\n          percentage = mousePos.x / mousePos.width,\n          seekTo = App.AudioController.audioElement.duration * percentage;\n\n      App.AudioController.audioElement.currentTime = seekTo;\n    }, this), false);\n  }\n\n  // Get the mouse position over the canvas\n  getMousePosition(canvas, event) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n      x: event.clientX - rect.left,\n      y: event.clientY - rect.top,\n      width: rect.width\n    };\n  }\n\n}","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","$traceurRuntime.superCall($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                   $__placeholder__3)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2,\n                                       $__placeholder__3)"]}